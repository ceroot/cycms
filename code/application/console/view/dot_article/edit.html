{extend name="mould:base" /}
{block name="title"}{/block}
{block name="content"}

<form action="{:url('add')}" method="post" class="form-horizontal cy-ajaxForm cy-form" role="form">
    <div class="form-group form-group-sm">
        <label class="col-sm-12" for="cid">所属分类：</label>
        <div class="col-sm-12">
            <select name="cid" class="form-cy col-sm-3" id="cid" required>
                <option value>请选择</option>
                {volist name='category' id='categorys'}
                    <option value="{$categorys.id}"{eq name="categorys.id" value="$one.cid"} selected="selected"{/eq}>{$categorys._name}</option>
                {/volist}
            </select>
        </div>
    </div>
    <div class="form-group form-group-sm">
        <label class="col-sm-12" for="title">内容标题：</label>
        <div class="col-sm-12">
            <input type="text" class="input-sm form-cy col-xs-10 col-sm-5" name="title" id="title" value="{$one.title}" placeholder="内容标题">
        </div>
    </div>
    <div class="form-group form-group-sm">
        <label class="col-sm-12" for="keywords">内容关键字：<span class="text-muted">（以英文逗号隔开，如果不填，系统自动获取）</span></label>
        <div class="col-sm-12">
            <input type="text" class="input-sm form-cy col-xs-10 col-sm-5" name="keywords" id="keywords" value="{$one.keywords}" placeholder="内容关键字">
        </div>
    </div>
    <div class="form-group form-group-sm">
        <label class="col-sm-12" for="description">内容描述：<span class="text-muted">（内容简介，如果不填，系统自动获取）</span></label>
        <div class="col-sm-12">
            <textarea class="form-cy col-xs-10 col-sm-5" name="description" id="description">{$one.description}</textarea>
        </div>
    </div>
    <div class="form-group form-group-sm">
        <label class="col-sm-12" for="images">封面图：</label>
        <div class="col-sm-12">
            <a href="javascript:;" class="file">
                <input type="file" name="images" id="file0" />
                选择上传文件
            </a>
            <span class="lbl">&nbsp;&nbsp;<img src="/data/images/{$one.cover}" width="100" height="70" id="img0" ></span>
        </div>
    </div>
    <div class="form-group pd-r-10">
        <label class="col-sm-12" for="content">内容：</label>
        <div class="col-sm-12">
            <script id="content" class="ueditor" name="content" type="text/plain">
                {$one.content}
            </script>
        </div>
    </div>
    <div class="fixed-bottom">
        <div class="bottom-area">
            <input type="hidden" name="id" value="{$one.id}">
            <button class="btn btn-sm btn-default">保存</button>
        </div>
    </div>
</form>
<script type="text/javascript" src="__STATIC__/ueditor/1.4.3.3/ueditor.config.js"></script>
<script type="text/javascript" src="__STATIC__/ueditor/1.4.3.3/ueditor.all.js"></script>
<script type="text/javascript">
var userValidate = {
    rules: {
        'title':'required',
        'content':{
            required:true
        }
    }, 
    messages: {
        'title':'请填写标题',
        'content':{
            required:'请填写内容'
        }
    }
};

var ue = UE.getEditor('content',{
    // pasteplain : true,
    // fontsize   : [14]
    zIndex:898,
    topOffset:48,
    // toolbarTopOffset:50,
    maximumWords:50000
});

UE.getEditor('content').addListener('beforefullscreenchange',function(event,isFullScreen){
    if(isFullScreen){
        // alert('全屏');
        $('body').find('.edui-editor').css({'top':0});
    }else{
        // alert('默认');
        $('body').find('.edui-editor').css({'top':48+'px'});
    }
})

</script>
{/block}